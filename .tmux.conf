set-option -g default-shell /bin/zsh

# Settings courtesy internet

# Bind C-a (Ctrl+a) to default action on tmux
# set-option -g prefix C-a
# unbind C-b

# Command sequence for nested tmux when running tmux inside another tmux, you
# need to send command to inner tmux
bind-key a send-prefix

# C-a C-a for last active window
bind-key C-a last-window

# set vi type keys
setw -g mode-keys vi

# Set the repeat-time to 1 second so that multiple commands can be entered
# without sending the prefix-key within 1 second. Commands are made repeatable
# by -r option of bind-key. By default it is 500 ms.
set -g repeat-time 1000

# Selecting next pane using "Tab"
# -r is to enable repeat of command without need for pressing prefix again
# Tab is repeatable, within repeat-time (ms) delay...
bind-key -r Tab select-pane -t :.+

# Mouse support
set-option -g mouse on
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Scroll support
bind -n WheelUpPane   select-pane -t= \; copy-mode -e \; send-keys -M
bind -n WheelDownPane select-pane -t= \;                 send-keys -M
bind -n C-WheelUpPane select-pane -t= \; copy-mode -e \; send-keys -M

# Vi mode select
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer

# setw -g monitory-activity on
set -g visual-activity on

# 256 colors
# This causes some problem on some systems...
set -g default-terminal "screen-256color"

# starting window numbering at 1
set -g base-index 1

# Setting pane base index to 1.
setw -g pane-base-index 1

# Faster command sequence, no delay is sending command
set -sg escape-time 0

# Aggressive resize
setw -g aggressive-resize on

# Monitor window activity
setw -g monitor-activity on
set -g visual-activity on

# Automatic rename
setw -g automatic-rename on

# Binding r to reload this config file
bind r source-file ~/.tmux.conf \; display "Reloading config..."

# active window title colors
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-attr default

# pane border
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg default

# message text
set-option -g message-bg colour235 #base02
set-option -g message-fg colour166 #orange

# pane number display
set-option -g display-panes-active-colour colour33 #blue
set-option -g display-panes-colour colour166 #orange

set -g status-interval 5
set -g status-left-length 80
set -g status-right-length 451
set -g status-fg colour236
set -g status-bg colour39
set -g window-status-activity-attr bold
set -g pane-border-fg colour245
set -g pane-active-border-fg colour39
set -g message-fg colour16
set -g message-bg colour221
set -g message-attr bold
set -g status-left '#[fg=colour236,bg=colour39,bold] #(echo #{pane_tty} | cut -d / -f 3,4) • #(hostname) [#S] • #(whoami)'
set -g window-status-current-format '#[fg=colour236,bg=colour39,bold] ➜ #W'
# set -g window-status-current-format '#[fg=colour236,bg=colour39,bold] ➜ #(basename $(echo #{pane_current_path} | sed -En "s@$HOME@~@p")) • #(ps aux | grep "$(echo #{pane_tty} | cut -d / -f 3,4)" | tr -s " " | cut -d " " -f 11 | sed "/^sh$/d" | sed "/^-zsh$/d" | sed "/^grep$/d" | head -n 1')
set -g status-right "#[fg=colour236,bg=colour39,bold]LOAD #(uptime | cut -d ',' -f 3 | cut -d ':' -f 2 | tr -d , | awk '{print $1;}') • RAM #(free -m | awk '/Mem/ {print int($3/$2*100)}')% • SWAP #(free -m | awk '/Swap/ {print int($3/$2*100)}')% • DISK #(df / | tail -n 1 | tr -s ' ' | cut -d ' ' -f 5) • BATTERY #(upower -i /org/freedesktop/UPower/devices/battery_BAT0 | grep percentage | tr -s ' ' | cut -d ' ' -f 3) • #(ip a show dev $(ip route | grep '^default' | head -n 1 | cut -d ' ' -f 5) | awk '/inet / {print $2}' | cut -d '/' -f 1) • %H:%M "
